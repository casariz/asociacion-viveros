<app-section-header [title]="'Cartera'" (search)="applyFilters()" (reset)="resetFilters()">
</app-section-header>

<app-data-table [columns]="columns" [data]="paginatedWallets" [currentPage]="currentPage" [totalPages]="totalPages"
    [showTotal]="true" [totalValue]="getTotalPaid()" (previousPage)="changePage(currentPage - 1)"
    (nextPage)="changePage(currentPage + 1)" (viewItem)="handleTableAction('view', $event)"
    (editItem)="handleTableAction('edit', $event)" (paymentsItem)="handleTableAction('payments', $event)">
</app-data-table>

<!-- Modal for payments table -->
@if (payments.length > 0) {
<div class="modal fade show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Historial de Pagos</h5>
                <button type="button" class="btn-close" (click)="closePaymentsModal()"></button>
            </div>
            <div class="modal-body">
                <app-table-payments [payments]="payments"></app-table-payments>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closePaymentsModal()">Cerrar</button>
            </div>
        </div>
    </div>
</div>
}

<div class="d-flex justify-content-end m-2 gap-2">
    <a routerLink="add-wallet" class="btn btn-lg rounded-circle btn-primary border-0 add-button">
        <i class="fas fa-plus"></i>
    </a>
</div>