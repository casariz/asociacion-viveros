
<app-section-header [title]="'Cartera'" (search)="applyFilters()" (reset)="resetFilters()">
</app-section-header>

<app-data-table [columns]="columns" [data]="paginatedWallets" [currentPage]="currentPage" [totalPages]="totalPages"
    [showTotal]="true" [totalValue]="getTotalPaid()" (previousPage)="changePage(currentPage - 1)"
    (nextPage)="changePage(currentPage + 1)" (viewItem)="handleTableAction('view', $event)"
    (editItem)="handleTableAction('edit', $event)" (paymentsItem)="handleTableAction('payments', $event)">
</app-data-table>

<!-- Modal for payments table -->
@if (payments.length > 0) {
<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
        <div class="flex items-center justify-between p-6 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900 m-0">Historial de Pagos</h2>
            <button
                class="p-2 hover:bg-gray-100 rounded-md transition-colors duration-200 text-gray-400 hover:text-gray-600"
                (click)="closePaymentsModal()">
                <i class="fas fa-times w-5 h-5"></i>
            </button>
        </div>
        <div class="p-6 flex-1 overflow-y-auto">
            <app-table-payments [payments]="payments"></app-table-payments>
        </div>
        <div class="flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50">
            <button
                class="px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 border bg-white text-gray-700 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
                (click)="closePaymentsModal()">
                Cerrar
            </button>
        </div>
    </div>
</div>
}

<!-- Botón flotante para agregar nueva obligación -->
<button
    class="fixed bottom-5 right-5 w-14 h-14 bg-green-600 text-white border-0 rounded-full text-2xl cursor-pointer shadow-lg hover:bg-green-700 transition-all duration-300 z-50 flex items-center justify-center hover:scale-110 active:scale-95"
    (click)="openAddWalletModal()" title="Agregar nueva obligación">
    <lucide-angular [img]="plus"></lucide-angular>
</button>

<!-- Modal de agregar cartera -->
<app-add-wallet [isModalOpen]="isAddWalletModalOpen" (closeModal)="closeAddWalletModal()">
</app-add-wallet>